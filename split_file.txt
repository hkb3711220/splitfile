@echo off
SET FILE_NAME=%1
SET MAXLINE_PER_FILE=%2
SET CURRENT_PATH=%~dp0
SET INPUT_PATH=%CURRENT_PATH%%FILE_NAME%
SET OUTPUT_PATH=%CURRENT_PATH%OUTPUT

IF NOT EXIST "%OUTPUT_PATH%" (MKDIR %OUTPUT_PATH%)

SET NUM=0
SET OUTPUT_NAME=0 

ECHO 入力ファイル:%FILE_NAME%
ECHO 分割行数:%MAXLINE_PER_FILE% 

SET /P USR_INPUT_STR="分割り開始(Y/N):"

IF "%USR_INPUT_STR%"=="Y" (

   SETLOCAL ENABLEDELAYEDEXPANSION
   FOR /F %%i in (%INPUT_PATH%) DO (
       SET /A NUM=!NUM!+1
       ECHO %%i >> %OUTPUT_PATH%\Split_!OUTPUT_NAME!.txt
       IF !NUM! EQU %MAXLINE_PER_FILE% (
          ECHO %OUTPUT_PATH%\Split_!OUTPUT_NAME!.txt HAS FINISHED!!!
          SET /A NUM=0
          SET /A OUTPUT_NAME=!OUTPUT_NAME!+1
    )
)
  ECHO 処理が完了しました！
  EXIT 0
) ELSE (
  ECHO 処理を停止しました!
  PAUSE 
  EXIT 0
)
